select sbr.admincomponent_crud.cmr_guid from dual
 
select * from PERMISSIBLE_VALUES where 
PV_IDSEQ = 'CFCBA97B-CB89-5D7B-E034-0003BA12F5E7'
--and rownum < 2

SELECT * FROM SBREXT.FB_VALID_VALUES_VIEW where QUES_IDSEQ = 'B387CBBD-A53C-50E5-E040-BB89AD4350CE' order by display_order


select pv_idseq, VM_IDSEQ from PERMISSIBLE_VALUES where 
short_meaning = 'No' and value = 'No' and created_by = 'SBR'
--rownum < 2

update VD_PVS vd
set PV_IDSEQ = (select pv_idseq from PERMISSIBLE_VALUES where 
short_meaning = 'No' and value = 'No' and created_by = 'SBR'
)


=Insert into PERMISSIBLE_VALUES (PV_IDSEQ,VALUE,SHORT_MEANING,MEANING_DESCRIPTION,BEGIN_DATE,END_DATE,HIGH_VALUE_NUM,LOW_VALUE_NUM,DATE_CREATED,CREATED_BY,DATE_MODIFIED,MODIFIED_BY,VM_IDSEQ) 
values ('99BA9DC8-54CF-4E69-E034-080020C9C0E0','No','No','No',to_date('22-AUG-02','DD-MON-RR'),null,null,null,to_date('13-FEB-02','DD-MON-RR'),'SBR',to_date('26-APR-12','DD-MON-RR'),'REEVESD','2509CE87-B588-5C23-E044-0003BA3F9857');


select q.* 
from PERMISSIBLE_VALUES q, sbr.VD_PVS_VIEW vd
where q.PV_IDSEQ = vd.PV_IDSEQ
and
vd.VP_IDSEQ = 'DD7550B5-55CC-3CC4-E034-0003BA12F5E7' 

commit;

select
*
--q.VP_IDSEQ 
--vd.VD_IDSEQ, q.VP_IDSEQ, q.QC_IDSEQ, vd.PV_IDSEQ
from sbr.QUEST_CONTENTS_EXT q, sbr.VD_PVS_VIEW vd
where q.VP_IDSEQ = vd.VP_IDSEQ
and
vd.VP_IDSEQ = 'DD7550B5-55CC-3CC4-E034-0003BA12F5E7' 
and q.QC_IDSEQ = '147D95F3-64A4-A5E8-E050-BB89A7B43C1C' --No (deleted)




--3 of 3 (works)
Insert into VALID_VALUES_ATT_EXT (QC_IDSEQ,MEANING_TEXT,DATE_CREATED,CREATED_BY,DATE_MODIFIED,MODIFIED_BY,DESCRIPTION_TEXT) 
values (
  '14B849C8-9711-24F5-E050-BB89A7B41326', --'147D95F3-64A4-A5E8-E050-BB89A7B43C1C',
'No',to_date('07-DEC-11','DD-MON-RR'),'MEDIDATA_LEEW',null,null,'The non-affirmative response to a question.');

commit;

delete VALID_VALUES_ATT_EXT
where QC_IDSEQ = '14B849C8-970D-24F5-E050-BB89A7B41326'

select * from VALID_VALUES_ATT_EXT
where 
--QC_IDSEQ = 'B387CBBD-A541-50E5-E040-BB89AD4350CE' --Yes
QC_IDSEQ = '147D95F3-64A4-A5E8-E050-BB89A7B43C1C' --No (deleted)


--2 of 3 (works)
--insert No (deleted previously)
Insert into SBREXT.QC_RECS_EXT 
(QR_IDSEQ,P_QC_IDSEQ,C_QC_IDSEQ,
DISPLAY_ORDER,RL_NAME,
DATE_CREATED,CREATED_BY,DATE_MODIFIED,MODIFIED_BY) 
values ('147D95F3-64A5-A5E8-E050-BB89A7B43C1C', --QR_IDSEQ
'B387CBBD-A53C-50E5-E040-BB89AD4350CE', --P_QC_IDSEQ
  '14B849C8-9711-24F5-E050-BB89A7B41326', --'147D95F3-64A4-A5E8-E050-BB89A7B43C1C', --QC_IDSEQ
1, --2nd row in the question
'ELEMENT_VALUE',
to_date('07-DEC-11','DD-MON-RR'),'MEDIDATA_LEEW',null,null);
 
delete from SBREXT.QC_RECS_EXT 
where QR_IDSEQ = '147D95F3-64A5-A5E8-E050-BB89A7B43C1C'

commit;

--1 of 3
Insert into sbr.QUEST_CONTENTS_EXT (QC_IDSEQ,VERSION,QTL_NAME,
CONTE_IDSEQ,ASL_NAME,PREFERRED_NAME,PREFERRED_DEFINITION,
--PROTO_IDSEQ,DE_IDSEQ,
VP_IDSEQ,
--QC_MATCH_IDSEQ,QC_IDENTIFIER,QCDL_NAME,
LONG_NAME,LATEST_VERSION_IND,DELETED_IND,
BEGIN_DATE,END_DATE,
MATCH_IND,NEW_QC_IND,HIGHLIGHT_IND,
REVIEWER_FEEDBACK_ACTION,REVIEWER_FEEDBACK_INTERNAL,REVIEWER_FEEDBACK_EXTERNAL,
SYSTEM_MSGS,REVIEWED_BY,REVIEWED_DATE,
APPROVED_BY,APPROVED_DATE,CDE_DICTIONARY_ID,
DATE_CREATED,CREATED_BY,DATE_MODIFIED,MODIFIED_BY,
CHANGE_NOTE,SUBMITTED_LONG_CDE_NAME,
GROUP_COMMENTS,SRC_NAME,
P_MOD_IDSEQ,
P_QST_IDSEQ,
P_VAL_IDSEQ,
DN_CRF_IDSEQ,
DN_VD_IDSEQ,
DISPLAY_IND,GROUP_ACTION,DE_LONG_NAME,VD_LONG_NAME,DEC_LONG_NAME,
DISPLAY_ORDER,ORIGIN,QC_ID,
GROUP_INTERNAL_COMMENTS,REPEAT_NO) 
--values ((select sbr.admincomponent_crud.cmr_guid from dual),1.00,'MODULE',
values (
'14B849C8-9711-24F5-E050-BB89A7B41326',  --'147D95F3-64A4-A5E8-E050-BB89A7B43C1C', --QC_IDSEQ
1.08,'VALID_VALUE',
'99BA9DC8-2095-4E69-E034-080020C9C0E0','UNASSIGNED','No 1','No',
--null,null,
null, --'DD7550B5-55CC-3CC4-E034-0003BA12F5E7', --null, --VP_IDSEQ can not be blank here!!!???
--null,null,null,
'No 2','Yes','No',
null,null,
null,null,null,
null,null,null,
null,null,null,
null,null,null,
to_date('13-FEB-02','DD-MON-RR'),'SBR',to_date('28-SEP-06','DD-MON-RR'),'SBREXT',
null,null,
null,null,
'99CD59C5-AD83-3FA4-E034-080020C9C0E0', --P_MOD_IDSEQ
'B387CBBD-A53C-50E5-E040-BB89AD4350CE', --null, --qc.P_QST_IDSEQ = qr.P_QC_IDSEQ can not be blank here!!!
null,
'99CD59C5-A94F-3FA4-E034-080020C9C0E0', --DN_CRF_IDSEQ
  'D4A6A07C-5582-25A1-E034-0003BA12F5E7', --null, --DN_VD_IDSEQ aka VD_IDSEQ
null,null,null,null,null,
1,null,3198806,   --CDE id
null,null);

commit;

delete from sbr.QUEST_CONTENTS_EXT q
--select * from sbr.QUEST_CONTENTS_EXT q
where 
--q.VP_IDSEQ = 'DD7550B5-55CC-3CC4-E034-0003BA12F5E7'
--and q.VD_IDSEQ = 'D4A6A07C-5582-25A1-E034-0003BA12F5E7'
--and QTL_NAME = 'MODULE'
--and QTL_NAME = 'VALID_VALUE'  --QUESTION TYPE, yes it is a misnomer c.f. VALID_VALUES for PV!
--and
QC_IDSEQ = '14B849C8-9710-24F5-E050-BB89A7B41326'

--and P_QST_IDSEQ = 'B387CBBD-A53C-50E5-E040-BB89AD4350CE'

update sbr.QUEST_CONTENTS_EXT q set P_QST_IDSEQ = 'B387CBBD-A53C-50E5-E040-BB89AD4350CE'
select P_QST_IDSEQ, q.* from sbr.QUEST_CONTENTS_EXT q
where 
q.VP_IDSEQ = 'DD7550B5-55CC-3CC4-E034-0003BA12F5E7' 
and 
QC_IDSEQ = '147D95F3-64A2-A5E8-E050-BB89A7B43C1C'
--and P_QST_IDSEQ = 'B387CBBD-A53C-50E5-E040-BB89AD4350CE'


SELECT * FROM USER_CONSTRAINTS WHERE CONSTRAINT_NAME = 'QCE_PK';



--delete from SBREXT.VALID_VALUES_ATT_EXT v where QC_IDSEQ in (
select 
--v.QC_IDSEQ 
*
from SBREXT.VALID_VALUES_ATT_EXT v, sbr.QUEST_CONTENTS_EXT q
where v.QC_IDSEQ = q.QC_IDSEQ
and
--q.VP_IDSEQ = 'DD7550B5-55CB-3CC4-E034-0003BA12F5E7' --deleted
rownum < 2
--);

--delete from sbr.QUEST_CONTENTS_EXT where VP_IDSEQ in (
select 
--q.VP_IDSEQ 
distinct vd.PV_IDSEQ
--, q.VP_IDSEQ
--*
from 
--sbr.QUEST_CONTENTS_EXT q, 
sbr.VD_PVS_VIEW vd
where 
--q.VP_IDSEQ = vd.VP_IDSEQ
--and
vd.VP_IDSEQ = 'DD7550B5-55CB-3CC4-E034-0003BA12F5E7' --deleted
--rownum < 2
--);


